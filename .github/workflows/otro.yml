name: DAST scan completition check

on:
  repository_dispatch:
    types:
      - DAST-scan

jobs:
  staging-sast-scan-code-test:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v2

        name: Severity of found vulnerabilities - Queries
      - run:  |
          echo Severity of found vulnerabilities
          echo High: ${{ github.event.client_payload.highQueries}}
          echo Medium: ${{ github.event.client_payload.mediumQueries}}
          echo Low: ${{ github.event.client_payload.lowQueries}}
        
        name: Severity of found vulnerabilities - Mutations
      - run:  |
          echo Severity of found vulnerabilities
          echo High: ${{ github.event.client_payload.highMutations}}
          echo Medium: ${{ github.event.client_payload.mediumMutations}}
          echo Low: ${{ github.event.client_payload.lowMutations}}

        name: get github event object - High
      - run: exit 1
        if: github.event.client_payload.high > 100
